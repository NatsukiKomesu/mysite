!function(s){var a=function(e,t,n,o,r){return"delete"==o?window.confirm(r):(a=t,i=n,0==(s=e.length)?(alert(i.zero),!1):!(a<s&&(alert(i.over),1)));var a,i,s},i=function(e,t,n,o){var r=e.options,a=s("ul."+n),i={"comment.typeCode":r.args["comment.typeCode"],page:o||1,lastUpdated:(new Date).getTime()};a.mtmCommentSet("option","typeCode",r.args["comment.typeCode"]),a.mtmCommentSet("setArgs",i),a.mtmCommentSet("setScrollDiff",r.scrollDiff),a.mtmCommentSet("getComment"),s("div.MdPagination04").njPageNavi("redraw",t,o||1)};s.widget("matome.mtmComment",{options:{mode:"insert",encryptId:void 0,typeCode:void 0,callback:{},gnb:".MdHeadUtil01",userPageServer:nj.getCombinedUrl(nj.getBaseUrl(),"mymatome"),commentListClass:"MdCommentList01"},_addButton:void 0,_textarea:void 0,_editCommentObject:void 0,_create:function(){for(var e=this.options,t=0;t<this.element.length;t++){var n=this.element[t],o={};switch(0<s("textarea",n).length&&(o=s("textarea",n)),o.length&&(s.browser.msie&&(o.css("min-height",o.height()),o.one("focus",function(){o.css("min-height","")})),o.expandingTextArea()),e.mode){case"insert":s(":button",n).mtmCommentSend({mode:"insert",textarea:o,callback:e.callback,args:{"comment.encryptId":e.encryptId,"comment.typeCode":e.typeCode,m:"ajaxInsert"}});break;case"update":var r=s(n).parent().parent().parent().attr("id");s("#_update_commnet").mtmCommentSend({mode:"update",textarea:o,callback:e.callback,args:{"comment.commentId":r,"comment.typeCode":e.typeCode,"comment.encryptId":e.encryptId,m:"ajaxUpdate"}});s("#_cancel_comment").bind("click.mtmComment",s.proxy(function(e){e.preventDefault(),this.cancelEditComment()},this));break;case"list":r=s(n).parent().attr("id");var a=e.encryptId,i=e.typeCode;s("a.mdBtn01Del01Btn",n).mtmCommentSend({mode:"delete",callback:e.callback,args:{"comment.commentId":r,"comment.encryptId":a,"comment.typeCode":i,m:"ajaxDelete"}})}}},destroy:function(){},editComment:function(e){var t=e.parent().parent().parent(),n=s(".mdCommentItem01Comment",this.element).html(),o=t.next();o.before('<div id="_edit_comment_form" class="MdCommentForm02"><p id="_edit_comment_form_text" class="mdCommentForm02Input"><textarea class="mdCommentForm02InputTxt" placeholder="追加するコメントを入力">'+n.replace(/<(br \/|br|br\/|BR \/|BR|BR\/)>/g,"\n").replace(/<.*?>/g,"")+'</textarea></p><p class="mdCommentForm02Btn"><span class="MdBtn01Post02"><input type="button" value="書き込む" id="_update_commnet" class="mdBtn01Post02Btn"></span><span class="MdBtn01Cancel03"><a href="#" id="_cancel_comment" class="mdBtn01Cancel03Btn">キャンセル</a></span></p></div>'),s(".mdCommentForm02InputTxt").njPlaceholder(),o.hide(),e.parent().parent().hide(),s("#_edit_comment_form").mtmComment({mode:"update"})},cancelEditComment:function(){var e=s(this.element[0]);e.next().show(),e.prev().children(".mdCommentItem01EditDelBtn").show(),s("#_edit_comment_form").remove()},deleteComment:function(e){}}),s.widget("matome.mtmCommentSend",s.matome.mtmComment,{options:{mode:"insert",url:"/comment",maxLength:"2000",method:"POST",callback:{},confirmText:"本当に削除しますか?\n一度削除すると元に戻すことはできません。",errorMsg:{over:"追加するコメントは、2000文字以内で入力してください。",zero:"コメントが入力されていません。",edit:"編集中のコメントがあるため、コメントはできません。",del:"編集中のコメントがあるため、コメントの削除はできません。"},textarea:void 0,args:{},commentListClass:"MdCommentList01"},_create:function(){var t=this,e=s(t.element[0]);s(".mdMTMComment01Counter"),this.options;e.bind("click.mtmCommnentSend",function(e){e.preventDefault(),t.sendComment(e)})},sendComment:function(e){var n=this,t=s(n.element[0]),o=s(".mdMTMComment01Counter"),r=this.options;if(0<s("#_edit_comment_form").length&&"insert"==r.mode)return alert(r.errorMsg.edit),void e.preventDefault();if(0<s("#_edit_comment_form").length&&"delete"==r.mode)return alert(r.errorMsg.del),void e.preventDefault();if(null!=s.cookie("NEO_SES")){if(t.unbind("click.mtmCommnentSend"),e&&e.preventDefault(),n.options.textarea){if(n.options.args["comment.content"]=n.options.textarea.njGetPlaceholderValue(),!n.options.args["comment.content"]&&"delete"!=n.options.mode)return alert(n.options.errorMsg.zero),void t.bind("click.mtmCommnentSend",function(e){n.sendComment(e)})}else n.options.args["comment.content"]=void 0;a(n.options.args["comment.content"],n.options.maxLength,n.options.errorMsg,n.options.mode,n.options.confirmText)?s.ajax({url:n.options.url,data:n.options.args,type:"POST",dataType:"json",success:s.proxy(function(e){var t=e.data?e.data:e;"true"==t.result?(n.setResponse(n,t),o.html(t.total),n.options.textarea&&(n.options.textarea.njSetPlaceholderValue(""),n.options.textarea.triggerHandler("blur.njPlaceholder"),n.options.textarea.trigger("blur.expandingTextarea"))):n._error(t),"function"==typeof n.options.callback&&n.options.callback()},this),error:function(e){alert("一時的に利用できません。")},complete:function(){t.bind("click.mtmCommnentSend",function(e){n.sendComment(e)})}}):t.bind("click.mtmCommnentSend",function(e){n.sendComment(e)})}else location.href="https://account.matome.naver.jp/service/login?fromUrl="+encodeURIComponent(location.href)},_error:function(e){alert("一時的に利用できません。")},setResponse:function(e,t){var n,o,r=e.options;"insert"==e.options.mode?i(e,t.total,r.commentListClass):"update"==e.options.mode?(n=t.content[0],(o=s("#_edit_comment_form")).next().html(l(n.comment)),s(".mdCommentItem01EditDelBtn").show(),o.next().show(),s("#_edit_comment_form").remove()):"delete"==e.options.mode&&i(e,t.total,r.commentListClass,s("div.MdPagination04").njPageNavi("getCurrentPage"))},setArgs:function(e){s.extend(this.args,e)}});var l=function(e){return e.replace(/((?:http:\/\/|https:\/\/|www\.)(?:[\w\-/:\#\?\=\&\;\%\~\+]+\.)+(?:[\w\-/:\#\?\=\&\;\%\~\+]+){1})/gim,function(e,t){return/^www\./.test(t)?"<A target='_blank' href='http://"+t+"'>"+t+"</A>":"<A target='_blank' href='"+t+"'>"+t+"</A>"})}}(jQuery),function(r){var o=function(e){return e.replace(/((?:http:\/\/|https:\/\/|www\.)(?:[\w\-/:\#\?\=\&\;\%\~\+]+\.)+(?:[\w\-/:\#\?\=\&\;\%\~\+]+){1})/gim,function(e,t){return/^www\./.test(t)?"<A target='_blank' href='https://"+t+"'>"+t+"</A>":"<A target='_blank' href='"+t+"'>"+t+"</A>"})};r.widget("matome.mtmCommentSet",r.matome.mtmComment,{options:{typeCode:"M",encryptId:"",url:"/comment",onCommentSetComplete:function(){},onCommentSetError:function(){},args:{},scrollDiff:0},_create:function(){},_error:function(e){alert("一時的に利用できません。")},setComment:function(e){this.element[0];var t=this.options;if("true"==e.data.result){var n=this.getCommentList(e);r(".MdCommentItem01").remove(),r(".MdCommentList01").html(n);var o={mode:"list",encryptId:t.encryptId,typeCode:t.typeCode};r(".MdCommentItem01").mtmComment(o),this.setScroll(),this._trigger("onCommentSetComplete",null,e)}else this._trigger("onCommentSetError",null,e)},errorComment:function(e){this._trigger("onCommentSetError",null,e)},getCommentList:function(e){var t=this.options,n="";return r.each(e.data.content,function(){var e=this;n+="<li id="+e.id+'><div id="_nj_comment_add_'+e.id+'" class="MdCommentItem01 MdCF">',"1"==e.isDeleted?n+='<p class="MdMsgDisp02"><span class="mdMsgDisp02Txt01">この投稿は現在表示することができません。</span></p>':(n+='<div class="mdCommentItem01Thumb"><a href="'+t.userPageServer+"/"+e.userNick+'" class="UserThumb"><img src="'+e.profile+'" width="51" height="51" alt="" onerror="errorImage(this, \'user51x51\')"></a>\x3c!-- /.mdCommentItem01Thumb --\x3e</div><div class="mdCommentItem01Txt"><p class="mdCommentItem01Option"><a href="'+t.userPageServer+"/"+e.userNick+'" class="mdCommentItem01UserName">'+e.userNick+'</a>さん<span class="MdSeparator01P04">|</span><span class="mdCommentItem01Date">'+e.updated+"</span>","Y"==e.isEdited&&(n+='<span class="mdCommentItem01EditDelBtn"><span class="MdBtn01Del01"><a href="#" class="mdBtn01Del01Btn">削除</a></span></span>'),n+='</p><p class="mdCommentItem01Comment">'+o(e.comment)+"</p>\x3c!-- /.mdCommentItem01Txt --\x3e</div>"),n+="\x3c!-- /.MdCommentItem01 --\x3e</div></li>"}),n},getComment:function(){var e=this.options;r.ajax({url:e.url,type:"POST",dataType:"json",data:e.args,success:r.proxy(this.setComment,this),error:r.proxy(this.errorComment,this)})},setArgs:function(e){var t=this.options;t.args["comment.typeCode"]=t.typeCode,t.args["comment.encryptId"]=t.encryptId,r.extend(t.args,e)},setScrollDiff:function(e){this.option("scrollDiff",e)},setScroll:function(){var e=r("ul.MdCommentList01").offset().top+this.option("scrollDiff");r(window).scrollTop(e)}});o=function(e){return e.replace(/((?:http:\/\/|https:\/\/|www\.)(?:[\w\-/:\#\?\=\&\;\%\~\+]+\.)+(?:[\w\-/:\#\?\=\&\;\%\~\+]+){1})/gim,function(e,t){return/^www\./.test(t)?"<A target='_blank' href='https://"+t+"'>"+t+"</A>":"<A target='_blank' href='"+t+"'>"+t+"</A>"})}}(jQuery),function($){$.fn.expandingTextArea=function(){return this.filter("textarea").each(function(){var textarea=this,$this=$(this);$this.css({"overflow-x":"auto","overflow-y":"hidden","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",resize:"none"});var _busyResizing=!1,_needsHelpShrinking=$.browser.mozilla||$.browser.webkit||$.browser.msie,_setTimoutHandle,gcs,px;function _getHeight(){var e=textarea.scrollHeight;return $.browser.msie?e+=textarea.offsetHeight-textarea.clientHeight:$.browser.webkit?e+=getBorderExtents(textarea).h:$.browser.mozilla?e+=textarea.offsetHeight-textarea.clientHeight:e+=getPadBorderExtents(textarea).h,e}function getPadExtents(e,t){var n=t||gcs(e),o=px(e,n.paddingLeft),r=px(e,n.paddingTop);return{l:o,t:r,w:o+px(e,n.paddingRight),h:r+px(e,n.paddingBottom)}}function getBorderExtents(e,t){var n="none",o=t||gcs(e),r=o.borderLeftStyle!=n?px(e,o.borderLeftWidth):0,a=o.borderTopStyle!=n?px(e,o.borderTopWidth):0;return{l:r,t:a,w:r+(o.borderRightStyle!=n?px(e,o.borderRightWidth):0),h:a+(o.borderBottomStyle!=n?px(e,o.borderBottomWidth):0)}}function getPadBorderExtents(e,t){var n=t||gcs(e),o=getPadExtents(e,n),r=getBorderExtents(e,n);return{l:o.l+r.l,t:o.t+r.t,w:o.w+r.w,h:o.h+r.h}}function _shrink(){if(_setTimoutHandle=null,_needsHelpShrinking&&!_busyResizing){var e=!(_busyResizing=!0);""==textarea.value&&(textarea.value=" ",e=!0);var t=textarea.scrollHeight;if(t){var n=$this.css("padding-bottom"),o=getPadExtents(textarea);o=o.h-o.t,$this.css("padding-bottom",o+1+"px");var r=_getHeight()-1+"px";$this.css("max-height")!=r&&($this.css("padding-bottom",o+t+"px"),textarea.scrollTop=0,$this.css("max-height",_getHeight()-t+"px")),$this.css("padding-bottom",n)}else _estimateHeight();e&&(textarea.value=""),_busyResizing=!1}}function _estimateHeight(){$this.css({"max-height":"",height:"auto"}),textarea.rows=(textarea.value.match(/\n/g)||[]).length+1}function _onInput(){if(!_busyResizing){if(_busyResizing=!0,textarea.scrollHeight&&textarea.offsetHeight&&textarea.clientHeight){var e=_getHeight()+"px";$this.css("height")!=e&&($this.css("height",e),$this.css("maxHeight",e)),_needsHelpShrinking&&(_setTimoutHandle&&clearTimeout(_setTimoutHandle),_setTimoutHandle=setTimeout(_shrink,0))}else _estimateHeight();_busyResizing=!1}}gcs=$.browser.webkit?function(e){var t;if(1==e.nodeType){var n=e.ownerDocument.defaultView;!(t=n.getComputedStyle(e,null))&&e.style&&(e.style.display="",t=n.getComputedStyle(e,null))}return t||{}}:$.browser.msie?function(e){return 1==e.nodeType?e.currentStyle:{}}:function(e){return 1==e.nodeType?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},px=$.browser.msie?function(element,avalue){if(!avalue)return 0;if("medium"==avalue)return 4;if(avalue.slice&&"px"==avalue.slice(-2))return parseFloat(avalue);with(element){var sLeft=style.left,rsLeft=runtimeStyle.left;runtimeStyle.left=currentStyle.left;try{style.left=avalue,avalue=style.pixelLeft}catch(e){avalue=0}style.left=sLeft,runtimeStyle.left=rsLeft}return avalue}:function(e,t){return parseFloat(t)||0},_setTimoutHandle=setTimeout(_onInput,0),$this.unbind(".expandingTextarea").bind("keyup.expandingTextarea",_onInput).bind("keydown.expandingTextarea",_onInput).bind("change.expandingTextarea",_onInput).bind("scroll.expandingTextarea",_onInput).bind("resize.expandingTextarea",_onInput).bind("focus.expandingTextarea",_onInput).bind("blur.expandingTextarea",_onInput).bind("cut.expandingTextarea",_onInput).bind("paste.expandingTextarea",_onInput)})}}(jQuery),function(i){var s,o,n,e,t,l,r,a,m,c,d;i.fn.njPlaceholder||(c=(e=-1!==(d=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==d.indexOf("trident"))?d.match(/trident\/([0-9]+?)\.([0-9]+?);/)[1]:0,t=6<=c,-1!==d.indexOf("firefox"),a=-1!==d.indexOf("opera"),m=!!navigator.appVersion.match(/windows.*\ version\/5.* safari\/5/i),l=!e&&!a&&!m,r=t,o={css:"ExPlaceholder",autoTrim:!0},s=function(e,t){var n;return this.options=i.extend({},o,t),this.$el=i(e),n=this.options,null,this.$el.removeClass(n.css),0===this.$el.val().length&&this._show(),r?this._setOldPlaceholder():this._setNewPlaceholder(),this},n=i.fn.val,i.fn.val=function(e){var t;return(t=this.data("MyNjPlaceholder"))?null!=e?(t.setValue(e),this):t.getValue():n.apply(this,arguments)},s.prototype={_setNewPlaceholder:function(){var a,e,i,t,n,o,r;return a=this.options,this.$el.bind("focus.njPlaceholder",(n=this,function(){if(n.$el.hasClass(a.css))return n._caretTop()})).bind("keyup.njPlaceholder",(t=this,function(){if(t.getValue().length<1)return t._show(),t._caretTop()})).bind("input.njPlaceholder keydown.njPlaceholder",(i=this,function(e){var t,n,o,r;return t=i.$el.hasClass(a.css),r=i.getValue(),o=8===e.keyCode||46===e.keyCode?r.length-1:r.length+1,n=e.keyCode,(!t||37!==n&&38!==n&&39!==n&&40!==n&&16!==n&&17!==n&&18!==n)&&(!t&&o<1?i.$el.addClass(a.css):t&&0<o?i._hide(r):void 0)})).bind("contextmenu.njPlaceholder",(e=this,function(){if(e.$el.hasClass(a.css))return e.$el.val(""),e._caretTop()})),l||this.$el.bind("blur.njPlaceholder",(r=this,function(){if(r.getValue().length<1)return r._show()})).bind("mouseup.njPlaceholder",(o=this,function(){if(o.$el.hasClass(a.css))return o._caretTop()})),this},_setOldPlaceholder:function(){var e,t,n;return e=this.options,this.$el.bind("focus.njPlaceholder",(n=this,function(){if(n.$el.hasClass(e.css))return n._hide("")})).bind("blur.njPlaceholder",(t=this,function(){if(!t.$el.hasClass(e.css)&&0===t.getValue().length)return t._show()}))},_show:function(){var e,t;return e=this.options,this.$el.addClass(e.css),t=this._getPlaceholder(),e.explaceholder&&i(e.explaceholder).addClass(e.css).text(t),l||t&&this._val(t),this},_hide:function(e){var t;return t=this.options,this.$el.removeClass(t.css),t.explaceholder&&i(t.explaceholder).removeClass(t.css).text(e),l||void 0!==e&&this._val(e),this},_getPlaceholder:function(){return this.$el.attr("placeholder")||this.$el.data("input_text")||null},_caretTop:function(){var e,t;return l||((t=this.$el[0]).setSelectionRange?setTimeout(function(){try{return t.setSelectionRange(0,0)}catch(e){}},1):t.createTextRange&&((e=t.createTextRange()).collapse(),e.moveEnd("character",0),e.moveStart("character",0),e.select())),this},destroy:function(){return this.$el.unbind("focus.njPlaceholder").unbind("blur.njPlaceholder").unbind("keydown.njPlaceholder").unbind("keyup.njPlaceholder").unbind("input.njPlaceholder").unbind("contextmenu.njPlaceholder").unbind("mouseup.njPlaceholder"),this},_val:function(){return n.apply(this.$el,arguments)},getValue:function(){var e,t,n,o;return t=this.options,o=this._val(),n=this._getPlaceholder(),e=this.$el.hasClass(t.css),o=n&&e?o.replace(n,""):this._val()},setValue:function(e){return this._val(e),0===e.length?this._show():this._hide(),this},clearValue:function(){return this._val("").blur(),this._show(),this},changePlaceholder:function(e){return null!=this.$el[0].placeholder?this.$el.attr("placeholder",e):this.$el.data("input_text",e),0===this.getValue().length&&this._show(),this}},i.extend(i.fn,{njPlaceholder:function(o,r){var e,a;return i.fn.njPlaceholder.isIe10=t,"getValue"===o?(e=(a=this.eq(0).data("MyNjPlaceholder")).getValue(),a.options.autoTrim?fnMatome.trim(e,!0):e):("setValue"===o||"clearValue"===o||"changePlaceholder"===o?(r=r||"",this.each(function(e,t){var n;return n=i(t),(a=n.data("MyNjPlaceholder"))[o](r)})):"destroy"===o?this.each(function(e,t){var n;if(n=i(t),a=n.data("MyNjPlaceholder"))return a.destroy(),a=null}):this.each(function(e,t){var n;n=i(t),a=n.data("MyNjPlaceholder"),a=new s(n,o),n.data("MyNjPlaceholder",a)}),this)},njGetPlaceholderValue:function(){var e,t;return(t=this.eq(0).data("MyNjPlaceholder"))?(e=t.getValue(),t.options.autoTrim?fnMatome.trim(e,!0):e):this.eq(0).val()},njSetPlaceholderValue:function(n){return this.each(function(){var e,t;return(t=(e=i(this)).data("MyNjPlaceholder"))?t.setValue(n):e.val(n)}),this},njChangePlaceholder:function(o){return this.each(function(e,t){var n;if(n=i(t).data("MyNjPlaceholder"))return n.changePlaceholder(o)}),this},njClearPlaceholder:function(){return this.each(function(e,t){var n;if(n=i(t).data("MyNjPlaceholder"))return n.clearValue()}),this}}))}(jQuery),function(){"use strict";var a;a={content:{value:"",maxlen:53},title:{value:"",maxlen:53},siteTitle:{value:"NAVER まとめ"}},nj.getPackage("nj.matome.common.getTweet",function(e,t){var n,o,r;for(n in t=null!=t?t:"${content}{{if title}}：${title}{{/if}} - ${siteTitle}",r={},e=$.extend(!0,{},a,e))o=e[n],r[n]="string"==typeof o?o:o.maxlen?nj.cutString(o.value,o.maxlen,"…"):o.value;return $.tmpl(t,r).text()})}();